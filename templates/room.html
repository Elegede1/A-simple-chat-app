{% extends "base.html" %}

{% block title %}Chat Room: {{ code }}{% endblock %}

{% block content %}
<div id="chat-container">
    <h1>Chat Room: {{ code }}</h1>
    <div class="message-container" id="message-container">
        <!-- Messages will appear here -->
    </div>

    <div id="message-form">
        <input type="text" id="message-input" placeholder="Type a message...">
        <button id="send-btn">Send</button>
    </div>
</div>
{% endblock %}

{% block extra_scripts %}
<script>
    // Initialize chat with room-specific data
    document.addEventListener('DOMContentLoaded', function() {
        initializeChat("{{ username }}", "{{ code }}");

        // Display existing messages from the room
        {% if messages %}
            {% for message in messages %}
                displayExistingMessage(
                    "{{ message.username }}",
                    "{{ message.msg }}",
                    "{{ message.timestamp }}"
                );
            {% endfor %}
        {% endif %}
    });
</script>
{% endblock %}
